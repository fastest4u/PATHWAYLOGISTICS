<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataTable with AJAX JSON</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
</head>
<body>
    <table id="example" class="display" style="width:100%">
        <thead>
            <tr>
                <th>ลำดับ</th>
                <th>วันที่</th>
                <th>เส่นทาง</th>
                <th>บาร์โค้ด</th>
                <th>บริษัทขนส่ง</th>
                <th>พนักงานขับรถ</th>
                <th>ผู้ดำเนินการ</th>
                <th>แพนก</th>
                <th>ต้นทุน</th>
                <th>ราคา</th>
                <th>ยอดเบิก</th>
                <th>คงเหลือ</th>
                <th>กำไรขาดทุน</th>
                <th>สถานะ</th>
                <th>payment</th>
                <th>Check</th>
            </tr>
        </thead>
    </table>

    <script>
        Url = "https://sheet.best/api/sheets/b1628384-d498-4a3e-819f-fb58c139df2a/tabs/Transportation"
        $(document).ready(function() {
            $('#example').DataTable({
        "processing": true,
        "serverSide": true,
        "ajax": {
            "url": Url,  // แทนที่ด้วย URL ของ API ของคุณ
            "type": "GET",
            "dataSrc": function(json) {
                return json;  // ปรับตามโครงสร้าง JSON ของคุณ
            }
        },
                "columns": [
                    { "data": "ลำดับ" },
                    { 
                        "data": "วันที่",
                        "render": function (data, type, row) {
                            var date = new Date(data);
                            return date.toLocaleDateString();  // จัดรูปแบบวันที่
                        }
                    },
                    { "data": "เส่นทาง" },
                    { "data": "บาร์โค้ด" },
                    { "data": "บริษัทขนส่ง" },
                    { "data": "พนักงานขับรถ" },
                    { "data": "ผู้ดำเนินการ" },
                    { "data": "แพนก" },
                    { 
                        "data": "ต้นทุน",
                        "render": function (data, type, row) {
                            return '฿' + parseFloat(data).toLocaleString();  // จัดรูปแบบต้นทุน
                        }
                    },
                    { 
                        "data": "ราคา",
                        "render": function (data, type, row) {
                            return '฿' + parseFloat(data).toLocaleString();  // จัดรูปแบบราคา
                        }
                    },
                    { "data": "ยอดเบิก" },
                    { "data": "คงเหลือ" },
                    { 
                        "data": "กำไรขาดทุน",
                        "render": function (data, type, row) {
                            return '฿' + parseFloat(data).toLocaleString();  // จัดรูปแบบกำไรขาดทุน
                        }
                    },
                    { "data": "สถานะ" },
                    { "data": "payment" },
                    { "data": "Check" }
                ],
                "paging": true,
                "lengthMenu": [ [10, 25, 50, 100], [10, 25, 50, 100] ],  // แก้ไขที่นี่
                "pageLength": 10,
                "searching": true,
                "ordering": true
            });
        });
    </script>
</body>
</html>
